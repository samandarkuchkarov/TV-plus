function PopupListScreen(){var that=this;var menuItems=[];var left=0;var bottom=0;var popupListId="popup-list-screen";var selectedItem=0;var popupListMenu=new BaseMenu({menuId:"popup-list-menu",menuTag:"div",itemIdPrefix:"popup-list",itemTag:"div",useFastRefresh:true,hideItemIfEmptyName:true,getItemNameFunc:function(realItemIndex,itemIndex,node){var item=menuItems[realItemIndex];if(!node){return true}else{var spanElement=document.createElement("span");spanElement.setAttribute("id","popup-list"+itemIndex+"-span");spanElement.setAttribute("class","popup-list-menu-check-icon");var checkIconSpan=document.createElement("span");checkIconSpan.setAttribute("class","check-icon");node.appendChild(checkIconSpan);if(item.index===selectedItem){spanElement.className+=" checked";checkIconSpan.className+=" checked"}spanElement.innerHTML=App.lang.get("label-track")+" "+(realItemIndex+1)+" ";var lang=item.language;if(lang.length!==0){spanElement.innerHTML+=Helper.cropString("("+lang+")",8,"...")}node.appendChild(spanElement)}},onItemClick:function(index){that.key_enter()},onItemMouseOver:function(index){popupListMenu.setSelectedItem(index,index)}});this.setMenuItems=function(items){menuItems=[];menuItems=items};this.setSelectedItem=function(index){selectedItem=index};this.show=function(){Helper.byId(popupListId).style.bottom=bottom+"px";Helper.byId(popupListId).style.left=left+"px";_PopupListScreen.show();this.refreshListMenu()};this.setCoordinates=function(_left,_bottom){left=_left;bottom=_bottom};this.refreshListMenu=function(){popupListMenu.setNumberOfDisplayItems(menuItems.length);popupListMenu.setNumberOfSourceItems(menuItems.length);popupListMenu.setSelectedItem(0,0);popupListMenu.redrawMenuItems()};this.key_back=function(){this.key_exit()};this.key_enter=function(){var selMenuItem=popupListMenu.getSelectedDisplayItem();var index=menuItems[selMenuItem]["index"];if(index!==selectedItem){selectedItem=index;Device.setSelectedAudioTrack(index);this.refreshListMenu();popupListMenu.setSelectedItem(selMenuItem,selMenuItem)}else{this.key_exit()}};this.key_down=function(){if(popupListMenu.getSelectedDisplayItem()===popupListMenu.getNumberOfDisplayItems()-1){this.hide()}else{popupListMenu.setNextItem()}};this.key_up=function(){popupListMenu.setPreviousItem()};this.key_exit=function(){this.hide()};this.wheel=function(delta){if(delta>0){this.key_down()}else{this.key_up()}};this.key_long_enter=function(){if(App.showHelpButtonPanelFlag){var keys=[{action:"back",label:"label-cancel"}];App.popupKeyPanelScreen.setKeysForPanel(keys);App.popupKeyPanelScreen.setParentScreen("popup-list");App.display.showPopupScreen("popup-key-panel")}}}_PopupListScreen=new BaseScreen();PopupListScreen.prototype=_PopupListScreen;