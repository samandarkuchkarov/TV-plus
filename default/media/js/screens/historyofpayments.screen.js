function HistoryOfPaymentsScreen(){var menuItems=[];var historyMenu=new BaseMenu({menuId:"history-of-payments-menu",menuTag:"ul",itemIdPrefix:"history",itemTag:"li",useFastRefresh:true,hideItemIfEmptyName:false,getItemNameFunc:function(realItemIndex,itemIndex,node){if(menuItems[realItemIndex]){if(!node){return true}else{var time=menuItems[realItemIndex]["datetime"].slice(11,16);var date=menuItems[realItemIndex]["datetime"].slice(0,11);date=date.slice(-3,-1)+"."+date.slice(5,7)+"."+date.slice(0,4);var commentElement=document.createElement("div");commentElement.setAttribute("class","history-comment");commentElement.innerHTML=menuItems[realItemIndex]["comment"];var infoElement=document.createElement("div");infoElement.setAttribute("class","history-info");var dateElement=document.createElement("div");dateElement.setAttribute("class","history-date");dateElement.innerHTML=date;var currency=App.data.getCurrency();var currencyStr=currency==="RUB"?App.lang.get("RUB"):currency;var amountElement=document.createElement("div");amountElement.setAttribute("class","history-amount");amountElement.innerHTML=menuItems[realItemIndex]["amount"]+" "+currencyStr;infoElement.appendChild(dateElement);infoElement.appendChild(amountElement);node.appendChild(commentElement);node.appendChild(infoElement)}}else{return""}},onItemClick:function(index){var sourceItems=historyMenu.getCurrentPage()*historyMenu.getNumberOfDisplayItems()+index;historyMenu.setSelectedItem(index,sourceItems)},onItemMouseOver:function(index){var sourceItems=historyMenu.getCurrentPage()*historyMenu.getNumberOfDisplayItems()+index;historyMenu.setSelectedItem(index,sourceItems)}});this.refresh=function(){historyMenu.redrawMenuItems()};this.show=function(){Helper.hideById("history-of-payments-empty-screen");Helper.hideById("history-of-payments-menu-header");menuItems=[];historyMenu.clear();_HistoryOfPaymentsScreen.show();App.data.requestPaymentList({},function(error){menuItems=App.data.getPaymentList();if(menuItems.length===0){Helper.showById("history-of-payments-empty-screen")}else{Helper.showById("history-of-payments-menu-header");var n=10;if(n>menuItems.length){n=menuItems.length}historyMenu.setNumberOfDisplayItems(n);historyMenu.setNumberOfSourceItems(menuItems.length);historyMenu.setSelectedItem(0,0);historyMenu.redrawMenuItems()}})};this.init=function(){_HistoryOfPaymentsScreen.init()};this.key_down=function(){historyMenu.setNextItem()};this.key_up=function(){historyMenu.setPreviousItem()};this.key_back=function(){App.display.showScreen("balance")};this.key_menu=function(){App.display.showScreen("mainmenu")};this.key_exit=function(){if(App.player.isActive()){App.display.showScreen("player")}else{App.display.showScreen("balance")}};this.key_backspace=function(){this.key_exit()};this.wheel=function(delta){if(delta>0){this.key_down()}else{this.key_up()}};this.key_long_enter=function(){if(App.showHelpButtonPanelFlag){var keys=[{action:"back",label:"label-back"}];App.popupKeyPanelScreen.setKeysForPanel(keys);App.popupKeyPanelScreen.setParentScreen("history-of-payments");App.display.showPopupScreen("popup-key-panel")}else{this.key_enter()}}}_HistoryOfPaymentsScreen=new BaseScreen();HistoryOfPaymentsScreen.prototype=_HistoryOfPaymentsScreen;