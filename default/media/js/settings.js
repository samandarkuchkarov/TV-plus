function Settings(){var abonement="";var password="";var volume=-1;var clientId=-1;var apiKey="";var apiUrl="";var volumeSettingsSavingTimeout=null;var templateStyleList=[];var templateStyle=0;var isReferenceShown=false;var showPreviewPlayer=0;var showPreviewPlayerValues=[["NÐ¾",0],["Yes",1]];var availableTemplateStyles=["impuls","impuls_x"];this.saveSettings=function(){var timezone=_Settings.getTimezone();var bufferSize=_Settings.getBufferSize();var lang=_Settings.getLang();var style=templateStyle;var autoLaunchPlayer=_Settings.getAutoLaunchPlayer();var notificationTime=_Settings.getNotificationTime();App.device.setSettingsValue("timezone",timezone);App.device.setSettingsValue("bufferSize",bufferSize);App.device.setSettingsValue("lang",lang);App.device.setSettingsValue("abonement",abonement);App.device.setSettingsValue("password",password);App.device.setSettingsValue("volume",volume);App.device.setSettingsValue("clientId",clientId);App.device.setSettingsValue("apiKey",apiKey);App.device.setSettingsValue("apiUrl",apiUrl);App.device.setSettingsValue("templateStyle",templateStyleList.length>0?templateStyleList[style]:"");App.device.setSettingsValue("autoLaunchPlayer",autoLaunchPlayer);App.device.setSettingsValue("notificationTime",notificationTime);App.device.setSettingsValue("isReferenceShown",isReferenceShown);App.device.setSettingsValue("showPreviewPlayer",showPreviewPlayer);for(var i in this.customSettings){App.device.setSettingsValue(i,this.customSettings[i])}App.device.saveSettings(App.clientSettings.settings_filename)};this.refreshStylesArray=function(){var that=this;templateStyleList=[];var stylesArray;try{stylesArray=App.clientSettings.template_styles["impuls"]}catch(e){stylesArray=[this.getBasicStyleName()]}if(!stylesArray||stylesArray.length===0){stylesArray=[App.settings.getDefaultStyleName()]}var style=App.device.getSettingsValue("templateStyle",App.settings.getDefaultStyleName());for(var i=0;i<stylesArray.length;i++){if(availableTemplateStyles.indexOf(stylesArray[i])!==-1){templateStyleList.push(stylesArray[i]);if(stylesArray[i]===style){that.setTemplateStyle(templateStyleList.length-1)}}}Helper.addCSSTag(App.settings.getTemplateStyleUrl(),function(){},"template-style")};this.loadSettings=function(){var that=this;App.device.loadSettings(App.clientSettings.settings_filename,function(){var timezone=App.device.getSettingsValue("timezone",that.getDefaultTimezone());var bufferSize=App.device.getSettingsValue("bufferSize",that.getDefaultBufferSize());var autoLaunchPlayer=App.device.getSettingsValue("autoLaunchPlayer",that.getDefaultAutoLaunchPlayer());var notificationTime=App.device.getSettingsValue("notificationTime",that.getDefaultNotificationTime());var referenceShown=App.device.getSettingsValue("isReferenceShown",isReferenceShown);var defLang=that.getDefaultLang();if(App.device.getDeviceKind()==="android_stb"&&App.device.getAPIVersion()>=110&&!App.clientSettings.ignore_system_lang){defLang=that.getLangByName(App.device.getSystemLang())}var lang=App.device.getSettingsValue("lang",defLang);showPreviewPlayer=App.clientSettings.tv_channels_list_mode==="preview"?1:0;var previewPlayer=Helper.toInt(App.device.getSettingsValue("showPreviewPlayer",showPreviewPlayer));abonement=App.device.getSettingsValue("abonement","");password=App.device.getSettingsValue("password","");volume=App.device.getSettingsValue("volume",10);clientId=Helper.toInt(App.device.getSettingsValue("clientId",-1));apiKey=App.device.getSettingsValue("apiKey","");apiUrl=App.device.getSettingsValue("apiUrl","");that.setTimezone(parseInt(timezone));that.setBufferSize(parseInt(bufferSize));that.setLang(parseInt(lang));that.setVolume(parseInt(volume));that.setAutoLaunchPlayer(autoLaunchPlayer);that.setNotificationTime(notificationTime);that.setReferenceShownFlag(referenceShown);that.setShowPreviewPlayer(previewPlayer);for(var i in that.customSettings){that.customSettings[i]=App.device.getSettingsValue(i,that.customSettings[i])}})};this.clearSettings=function(){_Settings.setTimezone(this.getDefaultTimezone());_Settings.setBufferSize(this.getDefaultBufferSize());_Settings.setLang(this.getDefaultLang());_Settings.setAutoLaunchPlayer(this.getDefaultAutoLaunchPlayer());_Settings.setNotificationTime(this.getDefaultNotificationTime());templateStyle=0;abonement="";password="";volume=-1;isReferenceShown=false;showPreviewPlayer=App.clientSettings.tv_channels_list_mode==="preview"?1:0;this.saveSettings()};this.getAbonement=function(){return abonement};this.setAbonement=function(value){if(!value||value=="null"){value=""}abonement=value};this.getPassword=function(){return password};this.setPassword=function(value){if(!value||value=="null"){value=""}password=value};this.getVolume=function(){if(volume===-1){volume=App.device.getVolume()}volume=parseInt(volume);return volume};this.setVolume=function(value){if((!value&&value!==0)||value==="null"){value=volume}volume=parseInt(value);if(isNaN(volume)){volume=10}if(App.device.getDeviceKind()!=="samsung_smart_tv"){App.device.setVolume(volume)}if(volumeSettingsSavingTimeout){clearTimeout(volumeSettingsSavingTimeout)}volumeSettingsSavingTimeout=setTimeout(function(){App.settings.saveSettings()},10000)};this.getClientId=function(){return clientId};this.setClientId=function(value){if((value!==0&&!value)||value=="null"){value=-1}clientId=Helper.toInt(value)};this.getApiKey=function(){return apiKey};this.setApiKey=function(value){apiKey=value};this.getApiUrl=function(){return apiUrl};this.setApiUrl=function(value){apiUrl=value};this.getStyle=function(){return templateStyle};this.getDefaultStyleName=function(){if(App.clientSettings.template_style===""){return this.getBasicStyleName()}else{return App.clientSettings.template_style}};this.getStyleName=function(){return templateStyleList.length>0?templateStyleList[templateStyle]:this.getBasicStyleName()};this.getTemplateStyleList=function(){return templateStyleList};this.getTemplateStyleUrl=function(){if(templateStyleList.length>0&&templateStyleList[templateStyle]!=="impuls"&&templateStyleList[templateStyle]){return Helper.getResourceUrl("media/css/"+templateStyleList[templateStyle]+".css")}else{return""}};this.setTemplateStyle=function(style){templateStyle=style};this.setTemplateStyleCSS=function(callbackFunc){if(Helper.byClass("template-style").length===0){Helper.addCSSTag(App.settings.getTemplateStyleUrl(),function(){if(callbackFunc instanceof Function){callbackFunc()}},"template-style")}else{Helper.changeCSSTag(App.settings.getTemplateStyleUrl(),function(){if(callbackFunc instanceof Function){callbackFunc()}},"template-style")}};this.getBasicStyleName=function(){return"impuls"};this.getNumberOfStyleTemplates=function(){return templateStyleList.length};this.setReferenceShownFlag=function(flag){isReferenceShown=flag};this.getReferenceShownFlag=function(){return isReferenceShown};this.getLangByName=function(name){for(var i=0;i<App.lang.availableLangs.length;i++){if(App.lang.availableLangs[i][1]===name){return i}}return this.getDefaultLang()};this.setShowPreviewPlayer=function(flag){showPreviewPlayer=flag};this.getShowPreviewPlayer=function(){return showPreviewPlayer};this.getShowPreviewPlayerValues=function(){return showPreviewPlayerValues}}var _Settings=new BaseSettings();Settings.prototype=_Settings;